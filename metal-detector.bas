NEW 
1 PPM.DETECTOR 
10 PMODE 7,POUT ' GRREEN LED OUTPOUT
20 CONST TIM1.ARRH=$5262,TIM1.ARRL=$5263, SENSIVITY=4
24 CONST PB.CR1=$5008: BRES PB.CR1,8
26 CONST ADC.TDRL=$5407: BSET ADC.TDRL,8 
28 CONST LEN=32
30 PWM.EN 1,8 
40 PWM.CH.EN 4,1 
50 PWM.OUT 4,158
60 POKE TIM1.ARRH,1: POKE TIM1.ARRL,61 ' Fr=16Mhz/318
70 ADCON 1,4
80 PAUSE 100 
84 FOR I=1 TO LEN : LET S=S+ADCREAD(3):PAUSE 1:NEXT I 
86 LET A=S/LEN  
90 DO 
110 LET R=ADCREAD(3) 
112 LET S=S-A+R, A=S/LEN    
120 IF ABS(A-R)>SENSIVITY : GOSUB ALARM  
140 UNTIL KEY? 
150 ADCON 0 : PWM.EN 0 
200 END
210 CLS 
211 ' clear terminal screen 
212 ' send cursor top-left 
220 ? CHAR(27);"[";CHAR(50);CHAR($4A)
230 ? CHAR(27);"[";CHAR($48)
240 RETURN 
299 ' BEEP and LED on for 10msec 
300 ALARM 
310 DWRITE 7,1:TONE 500,10:DWRITE 7,0
320 RETURN 

